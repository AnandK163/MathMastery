<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Math Learning App (Grades 6–10)</title>
  <style>
    /* Reset and base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f9fafd; color: #222;
      min-height: 100vh;
      display: flex; flex-direction: column;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    header {
      background: #34568B;
      color: white;
      padding: 1rem 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      letter-spacing: 1px;
    }
    nav {
      background: #283e59;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }
    nav button {
      background: transparent;
      border: none;
      color: white;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    nav button:hover, nav button.active {
      background-color: #4A90E2;
    }
    main {
      flex: 1 1 auto;
      padding: 1rem 1rem 4rem;
      max-width: 980px;
      margin: auto;
      width: 95%;
    }
    h2 {
      color: #34568B;
      margin-top: 0;
    }
    .hidden {
      display: none;
    }
    /* Responsive columns */
    .flex-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .card {
      background: white;
      padding: 1rem 1.25rem;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
      flex: 1 1 280px;
    }
    button.action-btn {
      background-color: #34568B;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      margin-top: 0.5rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    button.action-btn:hover {
      background-color: #2a466d;
    }
    iframe.lesson-video {
      width: 100%;
      height: 220px;
      border-radius: 6px;
      border: none;
    }
    input[type="number"], input[type="text"] {
      padding: 0.5rem;
      margin: 0.3rem 0 0.7rem;
      width: 100%;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    /* Quiz styles */
    .quiz-question {
      font-weight: 600;
      margin: 0.75rem 0 0.5rem;
    }
    .options label {
      display: block;
      margin: 0.25rem 0;
      cursor: pointer;
    }
    .options input {
      margin-right: 0.5rem;
    }
    .quiz-feedback {
      margin-top: 0.5rem;
      font-weight: 600;
    }
    /* Score and badges */
    .scoreboard, .badge-list {
      margin-top: 1rem;
      padding: 1rem;
      background: #e6f0ff;
      border-radius: 6px;
      font-weight: 600;
    }
    /* Games container */
    .game-container {
      margin-top: 1rem;
    }
    /* Responsive */
    @media (max-width: 600px) {
      nav {
        flex-direction: column;
      }
      .flex-row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    Math Learning App (Grades 6–10)
  </header>
  <nav role="navigation" aria-label="Main Navigation">
    <button id="nav-home" class="active">Home</button>
    <button id="nav-lessons">Lessons</button>
    <button id="nav-quizzes">Quizzes</button>
    <button id="nav-games">Games</button>
    <button id="nav-real-life">Real-Life Applications</button>
  </nav>
  <main>
    <!-- Home Page -->
    <section id="page-home">
      <h2>Welcome to the Math Learning App!</h2>
      <p>This app helps students from classes 6 to 10 learn mathematics interactively.</p>
      <ul>
        <li>Visual & Concept-based Lessons</li>
        <li>Fun Quizzes aligned with Telangana SSC curriculum</li>
        <li>Engaging Math Games to sharpen skills</li>
        <li>Explore how math applies to real life</li>
        <li>Earn points and badges as you learn!</li>
      </ul>
      <p>Use the navigation above to start your learning journey.</p>
    </section>

    <!-- Lessons Page -->
    <section id="page-lessons" class="hidden">
      <h2>Lessons - Choose Your Class</h2>
      <div class="flex-row" id="lesson-class-buttons">
        <!-- Generated by JS -->
      </div>
      <div id="lesson-content" style="margin-top:1rem;">
        <p>Select a class to view lessons.</p>
      </div>
    </section>

    <!-- Quizzes Page -->
    <section id="page-quizzes" class="hidden">
      <h2>Quizzes - Select Class and Chapter</h2>
      <div>
        <label for="quiz-class-select">Select Class:</label>
        <select id="quiz-class-select" aria-label="Select Class for Quiz">
          <!-- Options by JS -->
        </select>
      </div>
      <div>
        <label for="quiz-chapter-select">Select Chapter:</label>
        <select id="quiz-chapter-select" aria-label="Select Chapter for Quiz" disabled>
          <option value="">Select class first</option>
        </select>
      </div>
      <div id="quiz-container" style="margin-top: 1rem;">
        <p>Select class and chapter to start quiz.</p>
      </div>
      <div class="scoreboard" aria-live="polite" id="quiz-score-board" hidden>
        Score: <span id="quiz-score">0</span> / <span id="quiz-total"></span>
      </div>
    </section>

    <!-- Games Page -->
    <section id="page-games" class="hidden">
      <h2>Math Games</h2>
      <div id="games-list" class="flex-row">
        <!-- Game cards generated below -->
      </div>
      <div id="game-active-container" style="margin-top:1rem;">
        <!-- Loaded game UI will appear here -->
      </div>
      <div class="scoreboard" aria-live="polite" id="game-score-board" hidden>
        Game Score: <span id="game-score">0</span>
      </div>
    </section>

    <!-- Real-Life Applications Page -->
    <section id="page-real-life" class="hidden">
      <h2>Real-Life Applications of Mathematics</h2>
      <div id="real-life-content">
        <article>
          <h3>Shopping: Calculating Discounts</h3>
          <p>
            When you buy items during sales, you often get a discount percentage. For example, if a shirt costs ₹500 and has a 20% discount, you pay ₹500 - (20% of 500) = ₹400.
          </p>
        </article>
        <article>
          <h3>Sports: Scoring & Averages</h3>
          <p>
            Math helps in calculating batting averages in cricket or points per game in basketball to track player performance over time.
          </p>
        </article>
        <article>
          <h3>Travel: Speed and Distance</h3>
          <p>
            Calculate how fast you need to drive to cover a distance in a given time using the formula distance = speed × time.
          </p>
        </article>
        <article>
          <h3>Construction: Area and Volume</h3>
          <p>
            Knowing geometry helps builders calculate how much paint is needed to cover a wall or how much concrete is required for a foundation.
          </p>
        </article>
        <p><em>More examples coming soon!</em></p>
      </div>
    </section>
  </main>

  <script>
    /********************
     * Navigation Setup *
     ********************/
    const navButtons = document.querySelectorAll('nav button');
    const pages = {
      home: document.getElementById('page-home'),
      lessons: document.getElementById('page-lessons'),
      quizzes: document.getElementById('page-quizzes'),
      games: document.getElementById('page-games'),
      realLife: document.getElementById('page-real-life'),
    };
    function setActivePage(pageKey) {
      Object.entries(pages).forEach(([key, el]) => {
        el.classList.toggle('hidden', key !== pageKey);
      });
      navButtons.forEach(btn => btn.classList.toggle('active', btn.id === 'nav-' + pageKey));
    }
    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const pageKey = btn.id.replace('nav-', '');
        setActivePage(pageKey);
        if (pageKey === 'lessons') renderLessonClassButtons();
        if (pageKey === 'quizzes') initQuizPage();
        if (pageKey === 'games') renderGameList();
      });
    });

    /******************************
     * 1. Lessons - Class Buttons *
     ******************************/
    const lessonClassContainer = document.getElementById('lesson-class-buttons');
    const lessonContentContainer = document.getElementById('lesson-content');

    function renderLessonClassButtons() {
      lessonClassContainer.innerHTML = '';
      ['6', '7', '8', '9', '10'].forEach(cls => {
        const btn = document.createElement('button');
        btn.className = 'action-btn';
        btn.textContent = 'Class ' + cls;
        btn.onclick = () => renderLessonContent(cls);
        lessonClassContainer.appendChild(btn);
      });
      lessonContentContainer.innerHTML = '<p>Select a class to view lessons.</p>';
    }

    function renderLessonContent(cls) {
      if (['6', '7', '8'].includes(cls)) {
        lessonContentContainer.innerHTML = '<p><em>Lessons for Class ' + cls + ' coming soon...</em></p>';
        return;
      }
      // Placeholder YouTube video links for classes 9 & 10, update these later in this object
      const videoLinks = {
        '9': [
          'https://youtu.be/Rx0LxxQTw1Q',
          'https://youtu.be/-QHxeK7mf_0',
          'https://youtu.be/mikVsxr9iAI',
        ],
        '10': [
          'https://youtu.be/InjU9ZJ1KbQ',
          'https://youtu.be/X4LbV0WUW68',
          'https://youtu.be/A5BdFlgPUr8',
        ],
      };
      // Show one random video per class selection
      const vids = videoLinks[cls];
      const randomVideo = vids[Math.floor(Math.random() * vids.length)];
      lessonContentContainer.innerHTML =
        `<iframe class="lesson-video" src="${randomVideo}" allowfullscreen title="Math Lesson Video"></iframe>`;
    }

    /*********************
     * 2. Quizzes Section *
     *********************/
    // Sample quiz questions by class and chapter (Telangana SSC math topics placeholder)
    const quizzesData = {
      '6': {
        'Number Systems': [
          {
            question: 'What is the greatest common divisor (GCD) of 24 and 36?',
            options: ['6', '12', '18', '24'],
            answer: '12',
          },
          {
            question: 'Which of the following numbers is prime?',
            options: ['15', '21', '29', '35'],
            answer: '29',
          },
        ],
        'Algebra': [
          {
            question: 'Solve for x: 2x + 3 = 11.',
            options: ['4', '5', '6', '7'],
            answer: '4',
          },
        ],
      },
      '9': {
        'Polynomials': [
          {
            question: 'What is the degree of polynomial 4x^3 + 2x^2 + x + 7?',
            options: ['1', '2', '3', '4'],
            answer: '3',
          },
          {
            question: 'Which of the following is a binomial?',
            options: ['5x + 3', 'x^2 + x + 1', 'x^3 + 2x^2 + x', '7'],
            answer: '5x + 3',
          },
        ],
      },
      // Add more classes and chapters and questions below as needed
    };

    const quizClassSelect = document.getElementById('quiz-class-select');
    const quizChapterSelect = document.getElementById('quiz-chapter-select');
    const quizContainer = document.getElementById('quiz-container');
    const quizScoreBoard = document.getElementById('quiz-score-board');
    const quizScoreSpan = document.getElementById('quiz-score');
    const quizTotalSpan = document.getElementById('quiz-total');

    function initQuizPage() {
      // Populate class dropdown
      quizClassSelect.innerHTML = '<option value="">Select Class</option>';
      Object.keys(quizzesData).forEach(c => {
        quizClassSelect.innerHTML += `<option value="${c}">Class ${c}</option>`;
      });
      quizChapterSelect.innerHTML = '<option value="">Select class first</option>';
      quizChapterSelect.disabled = true;
      quizContainer.innerHTML = '<p>Select class and chapter to start quiz.</p>';
      quizScoreBoard.hidden = true;
    }

    quizClassSelect.addEventListener('change', () => {
      const cls = quizClassSelect.value;
      if (!cls) {
        quizChapterSelect.disabled = true;
        quizChapterSelect.innerHTML = '<option value="">Select class first</option>';
        quizContainer.innerHTML = '<p>Select class and chapter to start quiz.</p>';
        quizScoreBoard.hidden = true;
        return;
      }
      quizChapterSelect.disabled = false;
      const chapters = Object.keys(quizzesData[cls] || {});
      quizChapterSelect.innerHTML = '<option value="">Select Chapter</option>';
      chapters.forEach(ch => {
        quizChapterSelect.innerHTML += `<option value="${ch}">${ch}</option>`;
      });
      quizContainer.innerHTML = '<p>Select chapter to start quiz.</p>';
      quizScoreBoard.hidden = true;
    });

    quizChapterSelect.addEventListener('change', () => {
      const cls = quizClassSelect.value;
      const ch = quizChapterSelect.value;
      if (!cls || !ch) {
        quizContainer.innerHTML = '<p>Select class and chapter to start quiz.</p>';
        quizScoreBoard.hidden = true;
        return;
      }
      startQuiz(quizzesData[cls][ch]);
    });

    let currentQuiz, currentQuestionIndex, quizScore;

    function startQuiz(questions) {
      currentQuiz = questions;
      currentQuestionIndex = 0;
      quizScore = 0;
      quizTotalSpan.textContent = questions.length;
      renderQuestion();
    }

    function renderQuestion() {
      const q = currentQuiz[currentQuestionIndex];
      let optionsHtml = '';
      q.options.forEach((opt, i) => {
        optionsHtml += `
          <label><input type="radio" name="quiz-option" value="${opt}" /> ${opt}</label>
        `;
      });
      quizContainer.innerHTML = `
        <div class="quiz-question">${q.question}</div>
        <div class="options">${optionsHtml}</div>
        <button class="action-btn" id="quiz-submit-btn" disabled>Submit Answer</button>
        <div class="quiz-feedback" id="quiz-feedback"></div>
      `;
      quizScoreBoard.hidden = false;
      quizScoreSpan.textContent = quizScore;

      const radios = quizContainer.querySelectorAll('input[name="quiz-option"]');
      const submitBtn = document.getElementById('quiz-submit-btn');
      radios.forEach(radio => {
        radio.addEventListener('change', () => {
          submitBtn.disabled = false;
          document.getElementById('quiz-feedback').textContent = '';
        });
      });
      submitBtn.onclick = () => {
        handleQuizAnswer();
      };
    }

    function handleQuizAnswer() {
      const selected = quizContainer.querySelector('input[name="quiz-option"]:checked');
      if (!selected) return;
      const userAnswer = selected.value;
      const q = currentQuiz[currentQuestionIndex];
      const feedback = document.getElementById('quiz-feedback');
      if (userAnswer === q.answer) {
        feedback.textContent = 'Correct! ✅';
        quizScore++;
      } else {
        feedback.textContent = `Incorrect! ❌ Correct answer: ${q.answer}`;
      }
      quizScoreSpan.textContent = quizScore;
      // Disable options and submit button
      quizContainer.querySelectorAll('input[name="quiz-option"]').forEach(i => i.disabled = true);
      document.getElementById('quiz-submit-btn').disabled = true;

      // Move to next question or finish
      currentQuestionIndex++;
      if (currentQuestionIndex < currentQuiz.length) {
        setTimeout(() => renderQuestion(), 1500);
      } else {
        setTimeout(() => {
          quizContainer.innerHTML = `<p>Quiz completed! Your score: ${quizScore} / ${currentQuiz.length}</p>`;
        }, 1500);
      }
    }

    /*********************
     * 3. Games Section    *
     *********************/
    // Simple points stored in localStorage for gamification
    const gameScoreBoard = document.getElementById('game-score-board');
    const gameScoreSpan = document.getElementById('game-score');
    const gameActiveContainer = document.getElementById('game-active-container');
    const gamesList = document.getElementById('games-list');

    let currentGameScore = 0;

    // Game templates and logic
    const gamesData = [
      {
        id: 'arith-speed',
        title: 'Arithmetic Speed Game',
        description: 'Solve as many arithmetic problems as you can in 60 seconds.',
        start() {
          gameActiveContainer.innerHTML = '';
          gameScoreBoard.hidden = false;
          currentGameScore = 0;
          gameScoreSpan.textContent = currentGameScore;

          const timerElem = document.createElement('div');
          timerElem.style.fontWeight = 'bold';
          timerElem.style.marginBottom = '0.5rem';
          gameActiveContainer.appendChild(timerElem);

          const problemElem = document.createElement('div');
          problemElem.style.fontSize = '1.25rem';
          problemElem.style.marginBottom = '0.5rem';
          gameActiveContainer.appendChild(problemElem);

          const inputElem = document.createElement('input');
          inputElem.type = 'number';
          inputElem.placeholder = 'Your answer';
          inputElem.style.fontSize = '1.2rem';
          inputElem.style.padding = '0.5rem';
          inputElem.style.width = '100%';
          gameActiveContainer.appendChild(inputElem);

          let timeLeft = 60;
          timerElem.textContent = `Time Left: ${timeLeft}s`;

          let currentAnswer = 0;
          function nextProblem() {
            // Random arithmetic: +, -, ×, ÷ (integers)
            const ops = ['+', '-', '*', '/'];
            const op = ops[Math.floor(Math.random() * ops.length)];
            let a = Math.floor(Math.random() * 20) + 1;
            let b = Math.floor(Math.random() * 20) + 1;
            if (op === '/') {
              // Adjust to ensure integer division
              a = a * b;
              problemElem.textContent = `${a} ÷ ${b} = ?`;
              currentAnswer = a / b;
            } else if (op === '*') {
              problemElem.textContent = `${a} × ${b} = ?`;
              currentAnswer = a * b;
            } else if (op === '+') {
              problemElem.textContent = `${a} + ${b} = ?`;
              currentAnswer = a + b;
            } else {
              problemElem.textContent = `${a} - ${b} = ?`;
              currentAnswer = a - b;
            }
            inputElem.value = '';
            inputElem.focus();
          }

          const intervalId = setInterval(() => {
            timeLeft--;
            timerElem.textContent = `Time Left: ${timeLeft}s`;
            if (timeLeft <= 0) {
              clearInterval(intervalId);
              inputElem.disabled = true;
              problemElem.textContent = `Game Over! Your score: ${currentGameScore}`;
              saveGameScore(currentGameScore);
              return;
            }
          }, 1000);

          inputElem.addEventListener('keydown', e => {
            if (e.key === 'Enter') {
              if (parseFloat(inputElem.value) === currentAnswer) {
                currentGameScore++;
                gameScoreSpan.textContent = currentGameScore;
              }
              nextProblem();
            }
          });

          nextProblem();
        },
      },
      {
        id: 'equation-solver',
        title: 'Equation Solver Puzzle',
        description: 'Solve for x in simple linear equations.',
        start() {
          gameActiveContainer.innerHTML = '';
          gameScoreBoard.hidden = false;
          currentGameScore = 0;
          gameScoreSpan.textContent = currentGameScore;

          const problemElem = document.createElement('div');
          problemElem.style.fontSize = '1.25rem';
          problemElem.style.marginBottom = '0.5rem';
          gameActiveContainer.appendChild(problemElem);

          const inputElem = document.createElement('input');
          inputElem.type = 'number';
          inputElem.placeholder = 'Value of x';
          inputElem.style.fontSize = '1.2rem';
          inputElem.style.padding = '0.5rem';
          inputElem.style.width = '100%';
          gameActiveContainer.appendChild(inputElem);

          const feedbackElem = document.createElement('div');
          feedbackElem.style.marginTop = '0.5rem';
          feedbackElem.style.fontWeight = '600';
          gameActiveContainer.appendChild(feedbackElem);

          let currentAnswer;
          function nextEquation() {
            // Generate ax + b = c form: a,b,c integers
            const a = Math.floor(Math.random() * 10) + 1;
            const x = Math.floor(Math.random() * 20) - 5;
            const b = Math.floor(Math.random() * 20) - 10;
            const c = a * x + b;
            problemElem.textContent = `${a}x + ${b >= 0 ? b : '('+b+')'} = ${c}`;
            currentAnswer = x;
            inputElem.value = '';
            inputElem.focus();
            feedbackElem.textContent = '';
          }

          inputElem.addEventListener('keydown', e => {
            if (e.key === 'Enter') {
              const val = parseFloat(inputElem.value);
              if (val === currentAnswer) {
                feedbackElem.textContent = 'Correct! ✅';
                currentGameScore++;
                gameScoreSpan.textContent = currentGameScore;
                setTimeout(nextEquation, 1000);
              } else {
                feedbackElem.textContent = 'Incorrect! Try again.';
              }
            }
          });

          nextEquation();
        },
      },
      {
        id: 'geometry-builder',
        title: 'Geometry Shape Builder',
        description: 'Identify properties and build polygons.',
        start() {
          gameActiveContainer.innerHTML = '';
          gameScoreBoard.hidden = false;
          currentGameScore = 0;
          gameScoreSpan.textContent = currentGameScore;

          gameActiveContainer.innerHTML = `
            <p>This game is coming soon! Stay tuned for interactive geometry challenges.</p>
          `;
          gameScoreBoard.hidden = true;
        },
      },
      {
        id: 'fraction-matching',
        title: 'Fraction Matching Game',
        description: 'Match equivalent fractions.',
        start() {
          gameActiveContainer.innerHTML = '';
          gameScoreBoard.hidden = false;
          currentGameScore = 0;
          gameScoreSpan.textContent = currentGameScore;

          gameActiveContainer.innerHTML = `
            <p>This game is coming soon! Practice matching equivalent fractions here.</p>
          `;
          gameScoreBoard.hidden = true;
        },
      },
    ];

    function renderGameList() {
      gamesList.innerHTML = '';
      gamesData.forEach(g => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${g.title}</h3>
          <p>${g.description}</p>
          <button class="action-btn" data-gameid="${g.id}">Play</button>
        `;
        gamesList.appendChild(card);
      });

      gamesList.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.dataset.gameid;
          const game = gamesData.find(g => g.id === id);
          if (game) {
            game.start();
            gameScoreBoard.hidden = false;
          }
        });
      });
      gameScoreBoard.hidden = true;
      gameActiveContainer.innerHTML = '<p>Select a game to begin!</p>';
    }

    function saveGameScore(score) {
      // Save points to localStorage
      let totalPoints = parseInt(localStorage.getItem('mathAppPoints')) || 0;
      totalPoints += score;
      localStorage.setItem('mathAppPoints', totalPoints);
      alert(`You earned ${score} points! Total Points: ${totalPoints}`);
    }

    /*******************************
     * On Load Initialization      *
     *******************************/
    setActivePage('home');
  </script>
</body>
</html>
